# Studio Web (Next.js) é¡¹ç›®ç»“æ„ä¸€è§ˆ - Redux + React Query æ–¹æ¡ˆ

## ğŸ“ ä¼˜åŒ–åçš„ç›®å½•ç»“æ„
```
Studio Web/
â”œâ”€â”€ @types/                 # ğŸ“ TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ api.d.ts           # ğŸ”Œ APIå“åº”ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ store.d.ts         # ğŸ“¦ ReduxçŠ¶æ€ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ global.d.ts        # ğŸŒ å…¨å±€ç±»å‹å£°æ˜
â”œâ”€â”€ app/                    # ğŸš€ Next.js App Router (é¡µé¢/è·¯ç”±/å¸ƒå±€)
â”œâ”€â”€ components/             # ğŸ§© Reactç»„ä»¶åº“
â”‚   â”œâ”€â”€ features/          # ğŸ“‹ ä¸šåŠ¡åŠŸèƒ½ç»„ä»¶ (UserProfile/Dashboard)
â”‚   â”œâ”€â”€ layout/            # ğŸ—ï¸ å¸ƒå±€ç»„ä»¶ (Header/Footer/Sidebar)
â”‚   â””â”€â”€ ui/                # ğŸ¨ åŸºç¡€UIç»„ä»¶ (Button/Input/Modal)
â”œâ”€â”€ configs/                # âš™ï¸ åº”ç”¨é…ç½® (ç¯å¢ƒå˜é‡/å¸¸é‡é…ç½®)
â”œâ”€â”€ hooks/                  # ğŸ£ è‡ªå®šä¹‰Hooks
â”‚   â”œâ”€â”€ queries/           # ğŸ” React Queryç›¸å…³Hooks (æœåŠ¡ç«¯çŠ¶æ€)
â”‚   â””â”€â”€ store/             # ğŸ“¦ Reduxç›¸å…³Hooks (å®¢æˆ·ç«¯çŠ¶æ€)
â”œâ”€â”€ i18n/                   # ğŸŒ å›½é™…åŒ– (å¤šè¯­è¨€ç¿»è¯‘æ–‡ä»¶)
â”œâ”€â”€ lib/                    # ğŸ“š ç¬¬ä¸‰æ–¹åº“é…ç½®
â”‚   â”œâ”€â”€ react-query.ts     # âš¡ React Queryå®¢æˆ·ç«¯é…ç½®
â”‚   â””â”€â”€ redux.ts           # ğŸ“¦ Redux Storeé…ç½®
â”œâ”€â”€ service/                # ğŸ”Œ APIæœåŠ¡å±‚ (çº¯HTTPè¯·æ±‚å‡½æ•°)
â”œâ”€â”€ providers/              # ğŸ” å…¨å±€Providerç»„ä»¶
â”œâ”€â”€ store/                  # ğŸ“¦ ReduxçŠ¶æ€ç®¡ç† (å®¢æˆ·ç«¯çŠ¶æ€)
â”‚   â”œâ”€â”€ slices/            # ğŸ”ª Reduxåˆ‡ç‰‡ (auth/ui/filtersç­‰)
â”‚   â””â”€â”€ index.ts           # ğŸª Storeé…ç½®å’Œå¯¼å‡º
â””â”€â”€ utils/                  # ğŸ› ï¸ å·¥å…·å‡½æ•° (æ ¼å¼åŒ–/éªŒè¯/é€šç”¨æ–¹æ³•)
```

## ğŸ”„ **æ•°æ®æµè½¬æ¶æ„å›¾**

### **å®Œæ•´æ•°æ®æµç¨‹**
```
ç”¨æˆ·äº¤äº’ â†’ Component â†’ Hook (åˆ†æµ) â†’ ä¸åŒçŠ¶æ€ç®¡ç†
    â†“         â†“         â†“              â†“
  äº‹ä»¶è§¦å‘   UIæ¸²æŸ“    çŠ¶æ€æŸ¥è¯¢        æ‰§è¡Œæ“ä½œ
    â†‘         â†‘         â†‘              â†‘
  UIæ›´æ–°  â† Component â† Hook â†â”€â”€ çŠ¶æ€æ›´æ–°é€šçŸ¥
```

### **æœåŠ¡ç«¯çŠ¶æ€æµ (React Query)**
```
Component â†’ hooks/queries/useUsers â†’ service/userService â†’ API
    â†“              â†“                      â†“                â†“
  è°ƒç”¨Hook       æ‰§è¡ŒæŸ¥è¯¢              HTTPè¯·æ±‚          åç«¯å¤„ç†
    â†‘              â†‘                      â†‘                â†‘
  è‡ªåŠ¨æ›´æ–°   â† React Queryç¼“å­˜ â† userService â† API Response
```

### **å®¢æˆ·ç«¯çŠ¶æ€æµ (Redux)**
```
Component â†’ hooks/store/useAuth â†’ store/slices/authSlice â†’ Redux Store
    â†“             â†“                    â†“                      â†“
  è§¦å‘Action   è°ƒç”¨dispatch        æ‰§è¡ŒReducer           çŠ¶æ€æ›´æ–°
    â†‘             â†‘                    â†‘                      â†‘
  é‡æ–°æ¸²æŸ“   â† useSelector â† store/index.ts â† çŠ¶æ€å˜æ›´é€šçŸ¥
```

## ğŸ¯ **å„æ¨¡å—åŠŸèƒ½è¯¦ç»†åˆ’åˆ†**

### ğŸ“Š **çŠ¶æ€ç®¡ç†èŒè´£åˆ†å·¥**

| çŠ¶æ€ç±»å‹ | ç®¡ç†å·¥å…· | å­˜å‚¨ä½ç½® | å…¸å‹ç”¨ä¾‹ |
|---------|---------|---------|----------|
| **æœåŠ¡ç«¯çŠ¶æ€** | React Query | Hookç¼“å­˜ | ç”¨æˆ·æ•°æ®ã€äº§å“åˆ—è¡¨ã€è®¢å•ä¿¡æ¯ |
| **å®¢æˆ·ç«¯çŠ¶æ€** | Redux | Store | è®¤è¯çŠ¶æ€ã€UIçŠ¶æ€ã€è¡¨å•çŠ¶æ€ |

### ğŸ”Œ **Service å±‚** (çº¯APIè°ƒç”¨)
```typescript
// service/userService.ts
export const userService = {
  // çº¯ç²¹çš„HTTPè¯·æ±‚ï¼Œæ— çŠ¶æ€é€»è¾‘
  getUsers: () => fetch('/api/users').then(res => res.json()),
  createUser: (data) => fetch('/api/users', { method: 'POST', body: JSON.stringify(data) })
}
```

### ğŸ£ **Hooks å±‚** (çŠ¶æ€ç®¡ç†æ¡¥æ¢)

#### **hooks/queries/** - æœåŠ¡ç«¯çŠ¶æ€ç®¡ç†
```typescript
// hooks/queries/useUsers.ts
export const useUsers = (filters) => {
  return useQuery({
    queryKey: ['users', filters],
    queryFn: () => userService.getUsers(filters),
    staleTime: 5 * 60 * 1000, // ç¼“å­˜ç­–ç•¥
  })
}

export const useCreateUser = () => {
  return useMutation({
    mutationFn: userService.createUser,
    onSuccess: () => queryClient.invalidateQueries(['users'])
  })
}
```

#### **hooks/store/** - å®¢æˆ·ç«¯çŠ¶æ€ç®¡ç†
```typescript
// hooks/store/useAuth.ts
export const useAuth = () => {
  const dispatch = useDispatch()
  return {
    ...useSelector(state => state.auth),
    login: (credentials) => dispatch(login(credentials)),
    logout: () => dispatch(logout())
  }
}
```

### ğŸ“¦ **Store å±‚** (å®¢æˆ·ç«¯çŠ¶æ€)
```typescript
// store/slices/authSlice.ts - è®¤è¯çŠ¶æ€
const authSlice = createSlice({
  name: 'auth',
  initialState: { user: null, isAuthenticated: false },
  reducers: { login, logout }
})

// store/slices/uiSlice.ts - UIçŠ¶æ€
const uiSlice = createSlice({
  name: 'ui',
  initialState: { sidebarOpen: false, theme: 'light' },
  reducers: { toggleSidebar, setTheme }
})
```

### ğŸ“š **Lib å±‚** (ç¬¬ä¸‰æ–¹åº“é…ç½®)
```typescript
// lib/react-query.ts
export const queryClient = new QueryClient({
  defaultOptions: {
    queries: { staleTime: 60 * 1000, cacheTime: 5 * 60 * 1000 }
  }
})

// lib/redux.ts
export const store = configureStore({
  reducer: {
    auth: authSlice.reducer,
    ui: uiSlice.reducer
  }
})
```

## ğŸ—ï¸ **å®é™…ä½¿ç”¨ç¤ºä¾‹**

### **å¤æ‚é¡µé¢ç»„ä»¶**
```typescript
// app/dashboard/page.tsx
'use client'
export default function DashboardPage() {
  // æœåŠ¡ç«¯çŠ¶æ€ (React Query)
  const { data: users, isLoading } = useUsers()
  const { data: orders } = useOrders()
  const createUserMutation = useCreateUser()
  
  // å®¢æˆ·ç«¯çŠ¶æ€ (Redux)  
  const { isAuthenticated } = useAuth()
  const { sidebarOpen, filters } = useUI()
  
  return <Dashboard {...props} />
}
```

### **æ•°æ®æµæ€»ç»“å›¾**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Component     â”‚    â”‚      Hooks       â”‚    â”‚  State Manager  â”‚
â”‚                 â”‚    â”‚                  â”‚    â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç”¨æˆ·äº¤äº’    â”‚â”‚â”€â”€â”€â†’â”‚ â”‚queries/      â”‚ â”‚â”€â”€â”€â†’â”‚ â”‚React Query  â”‚ â”‚
â”‚  â”‚            â”‚â”‚    â”‚ â”‚useUsers()    â”‚ â”‚    â”‚ â”‚   Cache     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                 â”‚    â”‚                  â”‚    â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ UIçŠ¶æ€åˆ‡æ¢  â”‚â”‚â”€â”€â”€â†’â”‚ â”‚store/        â”‚ â”‚â”€â”€â”€â†’â”‚ â”‚Redux Store  â”‚ â”‚
â”‚  â”‚            â”‚â”‚    â”‚ â”‚useAuth()     â”‚ â”‚    â”‚ â”‚             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘                       â†‘                       â†‘
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      çŠ¶æ€å˜æ›´é€šçŸ¥ï¼Œè§¦å‘é‡æ–°æ¸²æŸ“
```

### **å®Œæ•´çš„åº”ç”¨å±‚çº§ç»“æ„**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      app/layout.tsx                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  RootProvider                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                StoreProvider                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚              QueryProvider                â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚           AuthProvider              â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚       MoreProviders...        â”‚  â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚    Page Components      â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```



## ğŸ† **æ¶æ„ä¼˜åŠ¿æ€»ç»“**

- ğŸ¯ **èŒè´£æ¸…æ™°**: æœåŠ¡ç«¯/å®¢æˆ·ç«¯çŠ¶æ€åˆ†ç¦»ç®¡ç†
- âš¡ **æ€§èƒ½ä¼˜åŒ–**: React Queryè‡ªåŠ¨ç¼“å­˜ + Reduxç²¾ç¡®æ›´æ–°
- ğŸ”§ **æ˜“äºç»´æŠ¤**: æ¯ç§çŠ¶æ€éƒ½æœ‰ä¸“é—¨çš„ç®¡ç†æ–¹æ¡ˆ
- ğŸ§ª **æ˜“äºæµ‹è¯•**: Serviceå±‚çº¯å‡½æ•° + Hookå±‚é€»è¾‘å°è£…
- ğŸ“ˆ **å¯æ‰©å±•æ€§**: æ”¯æŒå¤æ‚åº”ç”¨çš„çŠ¶æ€ç®¡ç†éœ€æ±‚

**è¿™æ˜¯ç°ä»£å¤æ‚Reactåº”ç”¨çš„æœ€ä½³çŠ¶æ€ç®¡ç†æ¶æ„ï¼** ğŸ‰

